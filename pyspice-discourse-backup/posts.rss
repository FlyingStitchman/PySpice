<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:discourse="http://www.discourse.org/" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>PySpice - Latest posts</title>
    <link>https://pyspice.discourse.group</link>
    <description>Latest posts</description>
      <item>
        <title>More maintainers?</title>
        <dc:creator><![CDATA[@dsalman Salman]]></dc:creator>
        <description><![CDATA[ <p>A better idea may be to have a dedicated track in the NGspice user group for PySpice.</p> ]]></description>
        <link>https://pyspice.discourse.group/t/more-maintainers/120#post_4</link>
        <pubDate>Thu, 03 Feb 2022 00:32:34 +0000</pubDate>
        <guid isPermaLink="false">pyspice.discourse.group-post-274</guid>
      </item>
      <item>
        <title>Error while using 3 terminal Resistors</title>
        <dc:creator><![CDATA[@natarajpinakapani Nataraj Pinakapani]]></dc:creator>
        <description><![CDATA[ <p>I get an error when using 3 terminal resistors from Skywater 130nm PDK. When I looked at BasicElements.py, I noticed that all resistors are defined as DipoleElements. I have added a class for 3 terminal devices and now I am able to simulate the circuit.  The same is true for 3-terminal capacitors too.</p>
<p>I would like to contribute PySpice to make it compatible with Skywater 130nm PDK devices. Kindly let me know what would be best way to contribute</p> ]]></description>
        <link>https://pyspice.discourse.group/t/error-while-using-3-terminal-resistors/164#post_1</link>
        <pubDate>Mon, 31 Jan 2022 19:46:50 +0000</pubDate>
        <guid isPermaLink="false">pyspice.discourse.group-post-273</guid>
      </item>
      <item>
        <title>Simulating a circuit with 16 MOSFETs: True gmin stepping error</title>
        <dc:creator><![CDATA[@dsalman Salman]]></dc:creator>
        <description><![CDATA[ <p>The issue was the MOSFET model. I managed to solve the problem. See: <a href="https://www.youtube.com/watch?v=NthRTlX1atk" class="inline-onebox" rel="noopener nofollow ugc">Simulation of Digital Logic Gates in PySpice (Python) - YouTube</a></p> ]]></description>
        <link>https://pyspice.discourse.group/t/simulating-a-circuit-with-16-mosfets-true-gmin-stepping-error/162#post_2</link>
        <pubDate>Wed, 19 Jan 2022 04:02:18 +0000</pubDate>
        <guid isPermaLink="false">pyspice.discourse.group-post-271</guid>
      </item>
      <item>
        <title>Simulating a circuit with 16 MOSFETs: True gmin stepping error</title>
        <dc:creator><![CDATA[@dsalman Salman]]></dc:creator>
        <description><![CDATA[ <p>Hello,</p>
<p>I am trying to simulate a circuit using 16 MOSFETS.</p>
<p>The issue is that once the MOSFETS’s 15 and 16 are placed in the schematic, it results in an error: PySpice.Spice.NgSpice.Shared.NgSpiceShared - Shared.ERROR</p>
<p>If the MOSFET’s 15 and 16 are commented out, then the code compiles.</p>
<p>I am using NGspice-34.dll and PySpice 1.5. Have also tested with Pyspice 1.4.3 and NGspice-32.dll.</p>
<p>Is NGSpice reaching some maximum nodes/complexity limit? OR is this an issue with mosfet model? OR it is a circuit netlist (floating node?) issue?</p>
<p>Any help or ideas would be greatly appreciated.</p>
<p>The code and error message are reproduced below.</p>
<p>Thanks</p>
<p>Kahless96</p>
<p>##***********************************************<br>
import math<br>
import numpy as np<br>
import matplotlib.pyplot as plt<br>
from matplotlib.widgets import Cursor<br>
from matplotlib.pyplot import semilogx<br>
from matplotlib import pyplot</p>
<p>import PySpice.Logging.Logging as Logging<br>
logger = Logging.setup_logging()</p>
<p>from PySpice.Doc.ExampleTools import find_libraries<br>
from PySpice.Probe.Plot import plot<br>
from PySpice.Spice.Library import SpiceLibrary<br>
from PySpice.Spice.Netlist import Circuit<br>
from PySpice.Unit import *</p>
<p>from engineering_notation import EngNumber</p>
<p>##***********************************************</p>
<h2>
<a name="circuit-netlist-1" class="anchor" href="https://pyspice.discourse.group#circuit-netlist-1"></a>Circuit Netlist</h2>
<p>circuit = Circuit(‘MyCircuit’)</p>
<p>libraries_path = find_libraries()<br>
spice_library = SpiceLibrary(libraries_path)<br>
circuit.include(spice_library[‘ptm65nm_nmos’])<br>
circuit.include(spice_library[‘ptm65nm_pmos’])</p>
<h1>
<a name="define-inputs-2" class="anchor" href="https://pyspice.discourse.group#define-inputs-2"></a>Define inputs</h1>
<p>HIGH = 1@u_V<br>
LOW = 0@u_V<br>
f_D = 1@u_Hz<br>
f_C = f_D/2<br>
f_B = f_D/4<br>
f_A = f_D/8</p>
<p>steptime=1@u_ms<br>
finaltime = 8/f_D<br>
circuit.V(1, ‘Vdd’, circuit.gnd,       HIGH@u_V)<br>
circuit.PulseVoltageSource(2, ‘A’, circuit.gnd,<br>
initial_value=HIGH, pulsed_value=LOW,<br>
pulse_width=(1/f_A)/2, period=1/f_A)<br>
circuit.PulseVoltageSource(3, ‘B’, circuit.gnd,<br>
initial_value=HIGH, pulsed_value=LOW,<br>
pulse_width=(1/f_B)/2, period=1/f_B)<br>
circuit.PulseVoltageSource(4, ‘C’, circuit.gnd,<br>
initial_value=HIGH, pulsed_value=LOW,<br>
pulse_width=(1/f_C)/2, period=1/f_C)<br>
circuit.PulseVoltageSource(5, ‘D’, circuit.gnd,<br>
initial_value=HIGH, pulsed_value=LOW,<br>
pulse_width=(1/f_D)/2, period=1/f_D)</p>
<h1>
<a name="m-name-drain-node-gate-node-source-node-bulksubstrate-node-3" class="anchor" href="https://pyspice.discourse.group#m-name-drain-node-gate-node-source-node-bulksubstrate-node-3"></a>M    <source> &lt;bulk/substrate node&gt;
</h1>
<p>circuit.MOSFET(1, ‘out1’, ‘A’, ‘Vdd’, ‘Vdd’, model=‘ptm65nm_pmos’)<br>
circuit.MOSFET(2, ‘out1’, ‘B’, ‘Vdd’, ‘Vdd’, model=‘ptm65nm_pmos’)<br>
circuit.MOSFET(3, ‘out1’, ‘A’, ‘temp’, circuit.gnd, model=‘ptm65nm_nmos’)<br>
circuit.MOSFET(4, ‘temp’,‘B’, circuit.gnd, circuit.gnd, model=‘ptm65nm_nmos’)<br>
circuit.MOSFET(5, ‘out2’, ‘out1’, circuit.gnd, circuit.gnd, model=‘ptm65nm_nmos’)<br>
circuit.MOSFET(6, ‘out2’, ‘out1’, ‘Vdd’, ‘Vdd’, model=‘ptm65nm_pmos’)<br>
circuit.MOSFET(7, ‘out3’, ‘C’, ‘Vdd’, ‘Vdd’, model=‘ptm65nm_pmos’)<br>
circuit.MOSFET(8, ‘out3’, ‘D’, ‘Vdd’, ‘Vdd’, model=‘ptm65nm_pmos’)<br>
circuit.MOSFET(9, ‘out3’, ‘C’, ‘temp1’, circuit.gnd, model=‘ptm65nm_nmos’)<br>
circuit.MOSFET(10, ‘temp1’,‘D’, circuit.gnd, circuit.gnd, model=‘ptm65nm_nmos’)<br>
circuit.MOSFET(11, ‘out4’, ‘out3’, circuit.gnd, circuit.gnd, model=‘ptm65nm_nmos’)<br>
circuit.MOSFET(12, ‘out4’, ‘out3’, ‘Vdd’, ‘Vdd’, model=‘ptm65nm_pmos’)<br>
circuit.MOSFET(13, ‘op’, ‘out2’, ‘Vdd’, ‘Vdd’, model=‘ptm65nm_pmos’)<br>
circuit.MOSFET(14, ‘op’, ‘out4’, ‘Vdd’, ‘Vdd’, model=‘ptm65nm_pmos’)<br>
circuit.MOSFET(15, ‘op’, ‘out2’, ‘temp2’, circuit.gnd, model=‘ptm65nm_nmos’)<br>
circuit.MOSFET(16, ‘temp2’,‘out4’, circuit.gnd, circuit.gnd, model=‘ptm65nm_nmos’)</p>
<p>##***********************************************</p>
<h2>
<a name="simulation-transient-analysis-4" class="anchor" href="https://pyspice.discourse.group#simulation-transient-analysis-4"></a>Simulation: Transient Analysis</h2>
<p>simulator = circuit.simulator(temperature=25, nominal_temperature=25)<br>
analysis = simulator.transient(step_time=steptime, end_time=finaltime)</p>
<p>#########################</p>
<h1>
<a name="plotting-commands-5" class="anchor" href="https://pyspice.discourse.group#plotting-commands-5"></a>PLOTTING COMMANDS</h1>
<p>figure = plt.subplots(figsize=(11, 6))<br>
axe = plt.subplot(111)<br>
plt.xlabel(‘Time [s]’)<br>
plt.ylabel(‘Voltage [V]’)<br>
plt.grid()<br>
plot(analysis[‘op’], axis=axe, color=‘red’)<br>
plt.show()</p>
<p>Here is the error messages after which it fails to run:</p>
<p>2022-01-13 14:24:25,298 - PySpice.Spice.NgSpice.Shared.NgSpiceShared - Shared.ERROR - Note: Starting true gmin stepping<br>
2022-01-13 14:24:25,298 - PySpice.Spice.NgSpice.Shared.NgSpiceShared - Shared.ERROR - Trying gmin =   1.0000E-03 Note: One successful gmin step<br>
2022-01-13 14:24:25,298 - PySpice.Spice.NgSpice.Shared.NgSpiceShared - Shared.ERROR - Trying gmin =   1.0000E-04 Note: One successful gmin step<br>
2022-01-13 14:24:25,298 - PySpice.Spice.NgSpice.Shared.NgSpiceShared - Shared.ERROR - Trying gmin =   1.0000E-05 Note: One successful gmin step<br>
2022-01-13 14:24:25,298 - PySpice.Spice.NgSpice.Shared.NgSpiceShared - Shared.ERROR - Trying gmin =   1.0000E-06 Note: One successful gmin step<br>
2022-01-13 14:24:25,298 - PySpice.Spice.NgSpice.Shared.NgSpiceShared - Shared.ERROR - Trying gmin =   1.0000E-07 Note: One successful gmin step<br>
2022-01-13 14:24:25,298 - PySpice.Spice.NgSpice.Shared.NgSpiceShared - Shared.ERROR - Trying gmin =   1.0000E-08 Note: One successful gmin step<br>
2022-01-13 14:24:25,298 - PySpice.Spice.NgSpice.Shared.NgSpiceShared - Shared.ERROR - Trying gmin =   1.0000E-09 Note: One successful gmin step<br>
2022-01-13 14:24:25,314 - PySpice.Spice.NgSpice.Shared.NgSpiceShared - Shared.ERROR - Trying gmin =   1.0000E-10 Note: One successful gmin step<br>
2022-01-13 14:24:25,314 - PySpice.Spice.NgSpice.Shared.NgSpiceShared - Shared.ERROR - Trying gmin =   1.0000E-11 Note: One successful gmin step<br>
2022-01-13 14:24:25,314 - PySpice.Spice.NgSpice.Shared.NgSpiceShared - Shared.ERROR - Trying gmin =   1.0000E-12 Note: One successful gmin step<br>
2022-01-13 14:24:25,314 - PySpice.Spice.NgSpice.Shared.NgSpiceShared - Shared.ERROR - Trying gmin =   1.0000E-12 Note: One successful gmin step<br>
2022-01-13 14:24:25,314 - PySpice.Spice.NgSpice.Shared.NgSpiceShared - Shared.ERROR - Note: True gmin stepping completed</p>
<p>I have seen this gmin stepping error in other forum posts but in those cases it was related to circuit netlist error. This does not seem to be the case here.</p>
<p>The mosfet models being used are provided with Pyspice.</p> ]]></description>
        <link>https://pyspice.discourse.group/t/simulating-a-circuit-with-16-mosfets-true-gmin-stepping-error/162#post_1</link>
        <pubDate>Thu, 13 Jan 2022 03:55:35 +0000</pubDate>
        <guid isPermaLink="false">pyspice.discourse.group-post-270</guid>
      </item>
      <item>
        <title>Simulating Dependent Sources (CCVS works but VCVS does not?!)</title>
        <dc:creator><![CDATA[@kliao Yougui Liao]]></dc:creator>
        <description><![CDATA[ <p>Re: dsalman,</p>
<p>Thanks for your suggestions. The problem has been addressed. Yes, it was an installation issue.</p> ]]></description>
        <link>https://pyspice.discourse.group/t/simulating-dependent-sources-ccvs-works-but-vcvs-does-not/105#post_6</link>
        <pubDate>Sun, 28 Nov 2021 19:45:14 +0000</pubDate>
        <guid isPermaLink="false">pyspice.discourse.group-post-264</guid>
      </item>
      <item>
        <title>Simulating Dependent Sources (CCVS works but VCVS does not?!)</title>
        <dc:creator><![CDATA[@dsalman Salman]]></dc:creator>
        <description><![CDATA[ <p>It could be an installation issue. Please see here: <a href="https://youtu.be/KnA7xI7MAuI" class="inline-onebox" rel="noopener nofollow ugc">Introduction to PySpice (Python) for DC Circuit Analysis with Dependent Sources - YouTube</a></p> ]]></description>
        <link>https://pyspice.discourse.group/t/simulating-dependent-sources-ccvs-works-but-vcvs-does-not/105#post_5</link>
        <pubDate>Sun, 28 Nov 2021 09:05:45 +0000</pubDate>
        <guid isPermaLink="false">pyspice.discourse.group-post-263</guid>
      </item>
      <item>
        <title>Simulating Dependent Sources (CCVS works but VCVS does not?!)</title>
        <dc:creator><![CDATA[@kliao Yougui Liao]]></dc:creator>
        <description><![CDATA[ <p>when I run the program:<br>
##############################################################</p>
<p>import PySpice.Logging.Logging as Logging<br>
logger = Logging.setup_logging()</p>
<p>################################################################</p>
<p>from PySpice.Spice.Netlist import Circuit<br>
from PySpice.Unit import *</p>
<p>#################################################################</p>
<p>circuit = Circuit(‘Circuit with CCVS’)</p>
<p>circuit.R(1, 1, 2, 2@u_Ω)<br>
circuit.R(2, 2, circuit.gnd, 20@u_Ω)<br>
circuit.R(3, 2, 3, 5@u_Ω)<br>
circuit.R(4, 4, circuit.gnd, 10@u_Ω)<br>
circuit.R(5, 4, 5, 2@u_Ω)<br>
circuit.V(1, 1, circuit.gnd, 20@u_V)<br>
circuit.V(‘test’, 3, 4, 0@u_V)<br>
circuit.H(1, 5, circuit.gnd, ‘Vtest’, 8)</p>
<p>simulator = circuit.simulator(temperature=25, nominal_temperature=25)<br>
analysis = simulator.operating_point()</p>
<p>for node in analysis.nodes.values():<br>
print(‘Node {}: {:4.1f} V’.format(str(node), float(node)))</p>
<p>I see an error message:<br>
Traceback (most recent call last):<br>
File “C:\PySpice\ICs\programtest.py”, line 24, in <br>
simulator = circuit.simulator(temperature=25, nominal_temperature=25)</p>
<p>Any suggestions? Thanks in advance.</p> ]]></description>
        <link>https://pyspice.discourse.group/t/simulating-dependent-sources-ccvs-works-but-vcvs-does-not/105#post_4</link>
        <pubDate>Sun, 28 Nov 2021 08:09:49 +0000</pubDate>
        <guid isPermaLink="false">pyspice.discourse.group-post-262</guid>
      </item>
      <item>
        <title>XSPICE elements in PySpice</title>
        <dc:creator><![CDATA[@kliao Yougui Liao]]></dc:creator>
        <description><![CDATA[ <p>I always see a problem like this:<br>
Traceback (most recent call last):<br>
File “C:\PySpice\ICs\simulation.py”, line 23, in <br>
simulator = circuit.simulator(temperature=27, nominal_temperature=27)</p>
<p>My program execution shows a problem at “simulator = circuit.simulator(temperature=27, nominal_temperature=27)”. Any suggestions?</p>
<p>Thanks</p> ]]></description>
        <link>https://pyspice.discourse.group/t/xspice-elements-in-pyspice/61#post_6</link>
        <pubDate>Sun, 28 Nov 2021 08:05:54 +0000</pubDate>
        <guid isPermaLink="false">pyspice.discourse.group-post-261</guid>
      </item>
      <item>
        <title>Looking for a Xyce Example</title>
        <dc:creator><![CDATA[@marianux Mariano Llamedo]]></dc:creator>
        <description><![CDATA[ <p>I would also like Xyce examples too!</p>
<p>Following the comments above, I managed to make all work in Ubuntu 20.04 here is some code:</p>
<pre><code class="lang-auto">import PySpice.Logging.Logging as Logging
logger = Logging.setup_logging()

from PySpice.Spice.Netlist import Circuit

import matplotlib.pyplot as plt
import numpy as np

pCircuit1 = Circuit('Filtro pasabajo Bessel 3er orden')

pCircuit1.SinusoidalVoltageSource('input', 'in', pCircuit1.gnd, amplitude=1)

pCircuit1.R('G', 'in',  1, 1)
pCircuit1.L('1',    1,  2,  1.255 )
pCircuit1.C('1',    2,  pCircuit1.gnd,  0.5528 )
pCircuit1.L('2',    2,  'out', 0.1922 )
pCircuit1.R('L','out',  pCircuit1.gnd, 1)

# NGspice
# simulation1 = pCircuit1.simulator(temperature=25, nominal_temperature=25)
# Xyce-serial
simulation1 = pCircuit1.simulator(simulator = 'xyce-serial', xyce_command='/home/mariano/XyceInstall/Serial/bin/Xyce', temperature=25, nominal_temperature=25)

analysis1 = simulation1.ac(start_frequency=0.001, stop_frequency=100, number_of_points=100,  variation='dec')

ff = 2*np.pi * np.array(analysis1.frequency.tolist())

figure, (axMod, axPha) = plt.subplots(2, sharex = True, figsize=(20, 10))

axMod.semilogx(ff, 20*np.log10(np.abs(analysis1['out'])))
axMod.semilogx(True)
axMod.grid(True)
axMod.grid(True, which='minor')
axMod.set_ylabel("Módulo [dB]")

plt.sca(axMod)
plt.title("Síntesis doblemente cargada: Bessel de 3er orden")

phase = np.unwrap(np.angle(analysis1['out']))
delay = - np.diff(phase) / np.diff(ff)
delay = np.concatenate(([delay[0]], delay))
axPha.semilogx(ff, delay)
axPha.grid(True)
axPha.grid(True, which='minor')
axPha.set_xlabel("Frecuencia [rad/s]")
axPha.set_ylabel("Retardo [s]")
</code></pre>
<p>As a result a plot like that should be produced:</p>
<p></p><div class="lightbox-wrapper"><a class="lightbox" href="https://aws1.discourse-cdn.com/free1/uploads/pyspice/original/1X/ec2cde7d7c59fb1524bfe18f30b83b2a68b7df2e.png" data-download-href="/uploads/short-url/xHiOvs8STnZIQahaQ0KY9hzmBgq.png?dl=1" title="image" rel="noopener nofollow ugc"><img src="https://aws1.discourse-cdn.com/free1/uploads/pyspice/optimized/1X/ec2cde7d7c59fb1524bfe18f30b83b2a68b7df2e_2_690x355.png" alt="image" data-base62-sha1="xHiOvs8STnZIQahaQ0KY9hzmBgq" width="690" height="355" srcset="https://aws1.discourse-cdn.com/free1/uploads/pyspice/optimized/1X/ec2cde7d7c59fb1524bfe18f30b83b2a68b7df2e_2_690x355.png, https://aws1.discourse-cdn.com/free1/uploads/pyspice/optimized/1X/ec2cde7d7c59fb1524bfe18f30b83b2a68b7df2e_2_1035x532.png 1.5x, https://aws1.discourse-cdn.com/free1/uploads/pyspice/original/1X/ec2cde7d7c59fb1524bfe18f30b83b2a68b7df2e.png 2x" data-small-upload="https://aws1.discourse-cdn.com/free1/uploads/pyspice/optimized/1X/ec2cde7d7c59fb1524bfe18f30b83b2a68b7df2e_2_10x10.png"></a></div><p></p>
<p>The simulation is for this circuit</p>
<p></p><div class="lightbox-wrapper"><a class="lightbox" href="https://aws1.discourse-cdn.com/free1/uploads/pyspice/original/1X/91d30ada1040c58ff84780dcfe3170dc5fdf32bd.png" data-download-href="/uploads/short-url/kO1o92RO5ezqkb8szDKWNSkWjLv.png?dl=1" title="image" rel="noopener nofollow ugc"><img src="https://aws1.discourse-cdn.com/free1/uploads/pyspice/optimized/1X/91d30ada1040c58ff84780dcfe3170dc5fdf32bd_2_690x264.png" alt="image" data-base62-sha1="kO1o92RO5ezqkb8szDKWNSkWjLv" width="690" height="264" srcset="https://aws1.discourse-cdn.com/free1/uploads/pyspice/optimized/1X/91d30ada1040c58ff84780dcfe3170dc5fdf32bd_2_690x264.png, https://aws1.discourse-cdn.com/free1/uploads/pyspice/original/1X/91d30ada1040c58ff84780dcfe3170dc5fdf32bd.png 1.5x, https://aws1.discourse-cdn.com/free1/uploads/pyspice/original/1X/91d30ada1040c58ff84780dcfe3170dc5fdf32bd.png 2x" data-small-upload="https://aws1.discourse-cdn.com/free1/uploads/pyspice/optimized/1X/91d30ada1040c58ff84780dcfe3170dc5fdf32bd_2_10x10.png"></a></div><p></p> ]]></description>
        <link>https://pyspice.discourse.group/t/looking-for-a-xyce-example/82#post_2</link>
        <pubDate>Fri, 26 Nov 2021 14:51:51 +0000</pubDate>
        <guid isPermaLink="false">pyspice.discourse.group-post-258</guid>
      </item>
      <item>
        <title>Divide one AC-analysis waveform by another</title>
        <dc:creator><![CDATA[@AMK Ashwin Khambadkone]]></dc:creator>
        <description><![CDATA[ <p>Get result into np.array</p>
<p>V = np.array(analysis.nodes[‘none name’])<br>
I = np.array(analysis.branches[‘branch name’])<br>
Now you can try mathematical operation ion V and I as they are numpy arrays.</p> ]]></description>
        <link>https://pyspice.discourse.group/t/divide-one-ac-analysis-waveform-by-another/140#post_2</link>
        <pubDate>Thu, 11 Nov 2021 13:52:23 +0000</pubDate>
        <guid isPermaLink="false">pyspice.discourse.group-post-255</guid>
      </item>
      <item>
        <title>Extract array of complex numbers from waveform</title>
        <dc:creator><![CDATA[@AMK Ashwin Khambadkone]]></dc:creator>
        <description><![CDATA[ <p>If say you have<br>
analysis = simulator.AC(…)<br>
then try<br>
c = np.array(analysis.nodes[‘in’]) where "in’ is one of the nodes<br>
print(c)<br>
and check if it is complex</p> ]]></description>
        <link>https://pyspice.discourse.group/t/extract-array-of-complex-numbers-from-waveform/139#post_2</link>
        <pubDate>Thu, 11 Nov 2021 13:49:39 +0000</pubDate>
        <guid isPermaLink="false">pyspice.discourse.group-post-254</guid>
      </item>
      <item>
        <title>Problems with running simulator</title>
        <dc:creator><![CDATA[@AMK Ashwin Khambadkone]]></dc:creator>
        <description><![CDATA[ <p>Hi every one!<br>
I am new to PySpice. I was running 1.4.3 ver with ngspice 3.2 and everything was working well.<br>
My computer did a usual clean up and update.</p>
<p>Now the netlist part works fine. But when I call the simulator I get a long error message (I will paste below). I was doing good progress and I am glad to share a 3 phase diode rectifier model which was working well. Until this problem arose. When I did an update I see that the cur ver is 1.5 and installs ngspice 3.4</p>
<p>Any help is appreciated. Else will have to go back to LTspice</p>
<p>Error msg attached below</p>
<hr>
<p>TypeError                                 Traceback (most recent call last)<br>
 in <br>
----&gt; 1 simulator = circuit3.simulator(temperature=25, nominal_temperature=25)<br>
2 simulator.initial_condition(out = 90@u_V)<br>
3 analysis = simulator.transient(step_time=Vac.period/1000, end_time=Vac.period*6)<br>
4<br>
5 res = format_output(analysis)</p>
<p>~\Anaconda3\lib\site-packages\PySpice\Spice\Netlist.py in simulator(self, *args, **kwargs)</p>
<p>~\Anaconda3\lib\site-packages\PySpice\Spice\Simulation.py in factory(cls, circuit, *args, **kwargs)<br>
1117     “”" This class implements a circuit simulator. Each analysis mode is performed by a method that<br>
1118     return the measured probes.<br>
 → 1119<br>
1120     For <em>ac</em> and <em>transient</em> analyses, the user must specify a list of nodes using the <em>probes</em> key<br>
1121     argument.</p>
<p>~\Anaconda3\lib\site-packages\PySpice\Spice\NgSpice\Simulation.py in <strong>init</strong>(self, circuit, **kwargs)<br>
97         ngspice_shared = kwargs.get(‘ngspice_shared’, None)<br>
98         if ngspice_shared is None:<br>
—&gt; 99             self._ngspice_shared = NgSpiceShared.new_instance()<br>
100         else:<br>
101             self._ngspice_shared = ngspice_shared</p>
<p>~\Anaconda3\lib\site-packages\PySpice\Spice\NgSpice\Shared.py in new_instance(cls, ngspice_id, send_data, verbose)<br>
450             cls._instances[ngspice_id] = instance<br>
451             return instance<br>
 → 452<br>
453     ##############################################<br>
454</p>
<p>~\Anaconda3\lib\site-packages\PySpice\Spice\NgSpice\Shared.py in <strong>init</strong>(self, ngspice_id, send_data, verbose)<br>
478         self._library_path = None<br>
479         self._load_library(verbose)<br>
 → 480         self._init_ngspice(send_data)<br>
481<br>
482         self._is_running = False</p>
<p>~\Anaconda3\lib\site-packages\PySpice\Spice\NgSpice\Shared.py in _load_library(self, verbose)<br>
511             if ‘SPICE_LIB_DIR’ not in os.environ:<br>
512                 _ = str(Path(self.NGSPICE_PATH).joinpath(‘share’, ‘ngspice’))<br>
 → 513                 os.environ[‘SPICE_LIB_DIR’] = _<br>
514                 # self._logger.warning(‘Set SPICE_LIB_DIR = %s’, _)<br>
515</p>
<p>~\Anaconda3\lib\pathlib.py in <strong>new</strong>(cls, *args, **kwargs)<br>
1036         if cls is Path:<br>
1037             cls = WindowsPath if os.name == ‘nt’ else PosixPath<br>
 → 1038         self = cls._from_parts(args, init=False)<br>
1039         if not self._flavour.is_supported:<br>
1040             raise NotImplementedError(“cannot instantiate %r on your system”</p>
<p>~\Anaconda3\lib\pathlib.py in _from_parts(cls, args, init)<br>
677         # right flavour.<br>
678         self = object.<strong>new</strong>(cls)<br>
 → 679         drv, root, parts = self._parse_args(args)<br>
680         self._drv = drv<br>
681         self._root = root</p>
<p>~\Anaconda3\lib\pathlib.py in _parse_args(cls, args)<br>
661                 parts += a._parts<br>
662             else:<br>
 → 663                 a = os.fspath(a)<br>
664                 if isinstance(a, str):<br>
665                     # Force-cast str subclasses to str (issue <span class="hashtag">#21127</span>)</p>
<p>TypeError: expected str, bytes or os.PathLike object, not NoneType</p> ]]></description>
        <link>https://pyspice.discourse.group/t/problems-with-running-simulator/153#post_1</link>
        <pubDate>Thu, 11 Nov 2021 13:45:39 +0000</pubDate>
        <guid isPermaLink="false">pyspice.discourse.group-post-253</guid>
      </item>
      <item>
        <title>How to get voltage acrros two points to write behavioral voltage source expression?</title>
        <dc:creator><![CDATA[@dsalman Salman]]></dc:creator>
        <description><![CDATA[ <p>Thank you. Its puzzling but the syntax does not work in Windows…</p> ]]></description>
        <link>https://pyspice.discourse.group/t/how-to-get-voltage-acrros-two-points-to-write-behavioral-voltage-source-expression/147#post_6</link>
        <pubDate>Mon, 04 Oct 2021 10:32:08 +0000</pubDate>
        <guid isPermaLink="false">pyspice.discourse.group-post-251</guid>
      </item>
      <item>
        <title>How to get voltage acrros two points to write behavioral voltage source expression?</title>
        <dc:creator><![CDATA[@sant Santlal Prajapati]]></dc:creator>
        <description><![CDATA[ <p>I did it with ubuntu os</p> ]]></description>
        <link>https://pyspice.discourse.group/t/how-to-get-voltage-acrros-two-points-to-write-behavioral-voltage-source-expression/147#post_5</link>
        <pubDate>Mon, 04 Oct 2021 04:18:36 +0000</pubDate>
        <guid isPermaLink="false">pyspice.discourse.group-post-249</guid>
      </item>
      <item>
        <title>How to get voltage acrros two points to write behavioral voltage source expression?</title>
        <dc:creator><![CDATA[@dsalman Salman]]></dc:creator>
        <description><![CDATA[ <p>Thank you. Is this syntax with Linux or Windows operating system.</p> ]]></description>
        <link>https://pyspice.discourse.group/t/how-to-get-voltage-acrros-two-points-to-write-behavioral-voltage-source-expression/147#post_4</link>
        <pubDate>Sun, 03 Oct 2021 09:30:44 +0000</pubDate>
        <guid isPermaLink="false">pyspice.discourse.group-post-248</guid>
      </item>
      <item>
        <title>How to get voltage acrros two points to write behavioral voltage source expression?</title>
        <dc:creator><![CDATA[@sant Santlal Prajapati]]></dc:creator>
        <description><![CDATA[ <p>yes. Use the following .</p>
<p>circuit.B(‘name’, ‘node1’, circuit.gnd, v=‘2*V(x,y)’)</p>
<p>v----&gt; is small and  V(x,y)—&gt; here V is capital</p> ]]></description>
        <link>https://pyspice.discourse.group/t/how-to-get-voltage-acrros-two-points-to-write-behavioral-voltage-source-expression/147#post_3</link>
        <pubDate>Sat, 02 Oct 2021 04:42:47 +0000</pubDate>
        <guid isPermaLink="false">pyspice.discourse.group-post-247</guid>
      </item>
      <item>
        <title>Howto: Transient analysis</title>
        <dc:creator><![CDATA[@dsalman Salman]]></dc:creator>
        <description><![CDATA[ <p>You can use circuit.PulseVoltageSource() command.</p>
<p>See example code posted in the comments here: <a href="https://www.youtube.com/watch?v=L7MbL85X3HM" class="inline-onebox" rel="noopener nofollow ugc">Introduction to PySpice (Python) for Simulating Natural and Step Response of RC Circuits - YouTube</a></p> ]]></description>
        <link>https://pyspice.discourse.group/t/howto-transient-analysis/150#post_3</link>
        <pubDate>Wed, 29 Sep 2021 05:58:02 +0000</pubDate>
        <guid isPermaLink="false">pyspice.discourse.group-post-246</guid>
      </item>
      <item>
        <title>Howto: Transient analysis</title>
        <dc:creator><![CDATA[@overthere Michael H.]]></dc:creator>
        <description><![CDATA[ <p>Okay, now I have the following code</p>
<pre><code class="lang-auto">
#r# This example shows the computation of the DC biases in a resistor bridge.

####################################################################################################

import matplotlib.pyplot as plt
##
import PySpice.Logging.Logging as Logging
logger = Logging.setup_logging()

####################################################################################################

from PySpice.Spice.Netlist import Circuit
from PySpice.Unit import *

####################################################################################################

#f# circuit_macros('resistor-bridge.m4')

circuit = Circuit('Resistor Divider')
#circuit.PulseMixin(0@u_V, 20@u_V, 5@u_us, 10@u_us, delay_time=0) #doesn't work
circuit.V('i', 'inp', circuit.gnd, 10@u_V) #works
circuit.R(1, 'inp', 'out', 5@u_kΩ)
circuit.R(2, 'out', circuit.gnd, 5@u_kΩ)


simulator = circuit.simulator(temperature=25, nominal_temperature=25)
analysis = simulator.transient(step_time=1@u_us, end_time=500@u_us)

####################################################################################################

figure1, ax = plt.subplots(figsize=(20, 10))
ax.set_title('Voltage Divider')
ax.set_xlabel('Time [s]')
ax.set_ylabel('Voltage [V]')
ax.grid()
ax.plot(analysis.inp)
ax.plot(analysis.out)
ax.legend(('input', 'output'), loc=(.05,.1))
#ax.set_ylim(float(-amplitude*1.1), float(amplitude*1.1))

#plt.tight_layout()
plt.show()
</code></pre>
<p>Can somebody help me please with the pulsed source?</p> ]]></description>
        <link>https://pyspice.discourse.group/t/howto-transient-analysis/150#post_2</link>
        <pubDate>Mon, 27 Sep 2021 20:26:57 +0000</pubDate>
        <guid isPermaLink="false">pyspice.discourse.group-post-245</guid>
      </item>
      <item>
        <title>Howto: Transient analysis</title>
        <dc:creator><![CDATA[@overthere Michael H.]]></dc:creator>
        <description><![CDATA[ <p>I want to do a transient analysis of a square wave.</p>
<ol>
<li>How do I do a transient analysis and plot the output?</li>
<li>How do I implement a square wave?</li>
</ol>
<p>I found nothing in the examples. Thanks for your help,<br>
Michael</p> ]]></description>
        <link>https://pyspice.discourse.group/t/howto-transient-analysis/150#post_1</link>
        <pubDate>Mon, 27 Sep 2021 20:08:15 +0000</pubDate>
        <guid isPermaLink="false">pyspice.discourse.group-post-244</guid>
      </item>
      <item>
        <title>How to get voltage acrros two points to write behavioral voltage source expression?</title>
        <dc:creator><![CDATA[@dsalman Salman]]></dc:creator>
        <description><![CDATA[ <p>Trying to do the same. Not sure what syntax to use to access the node voltages in the circuit. <a class="mention" href="https://pyspice.discourse.group/u/sant">@sant</a>: Were you able to make any progress. If you can share what you tried maybe we can help each other to solve this issue.</p> ]]></description>
        <link>https://pyspice.discourse.group/t/how-to-get-voltage-acrros-two-points-to-write-behavioral-voltage-source-expression/147#post_2</link>
        <pubDate>Fri, 24 Sep 2021 02:24:37 +0000</pubDate>
        <guid isPermaLink="false">pyspice.discourse.group-post-242</guid>
      </item>
      <item>
        <title>How to write .func in pyspice and use it in behavioral source?</title>
        <dc:creator><![CDATA[@sant Santlal Prajapati]]></dc:creator>
        <description><![CDATA[ <p>I want to write a .func that will help me designing a device model. I used **raw_spice=’ …’ **  but it is not working. I am new in pyspice.</p>
<p>Thank yuo</p> ]]></description>
        <link>https://pyspice.discourse.group/t/how-to-write-func-in-pyspice-and-use-it-in-behavioral-source/148#post_1</link>
        <pubDate>Thu, 16 Sep 2021 00:26:03 +0000</pubDate>
        <guid isPermaLink="false">pyspice.discourse.group-post-241</guid>
      </item>
      <item>
        <title>How to get voltage acrros two points to write behavioral voltage source expression?</title>
        <dc:creator><![CDATA[@sant Santlal Prajapati]]></dc:creator>
        <description><![CDATA[ <p>I am new with pyspice. I want to add a behavioral voltage source to my circuit. To write its expression we need voltage across two points x and y. For example v=2*Voltage(x,y)</p>
<p>Will anyone share the syntax in pyspice?<br>
Thank you.</p> ]]></description>
        <link>https://pyspice.discourse.group/t/how-to-get-voltage-acrros-two-points-to-write-behavioral-voltage-source-expression/147#post_1</link>
        <pubDate>Fri, 10 Sep 2021 13:08:01 +0000</pubDate>
        <guid isPermaLink="false">pyspice.discourse.group-post-240</guid>
      </item>
      <item>
        <title>Interrupted simulation multiple sources</title>
        <dc:creator><![CDATA[@tombalabomba]]></dc:creator>
        <description><![CDATA[ <p>Hi everyone,</p>
<p>for a research project I’m working on control strategies for PFC circuits and therefore I need to simulate a passive circuit in conjunction with two half bridges.<br>
Problem is that I need the simulation to interact with a python script since I need to calculate the control signals of the two half bridges externally and thus the simualtion flow is as follows.</p>
<p>First, I need to initialize the simulation which basically means that I need to sample the amplitude and phase of a sinusodial source representing the grid voltage and the component values and initial conditions of the passive components. Next, I need to run the simulation in chunks where I first calculate the four control signals of the half bridges based on the current and voltage signals of the passive circuit followed by a chunk of transient simulation for a given time span (sample rate of the controller).</p>
<p>I tried to implement this flow but I unfortunately I struggle with the following issues.</p>
<p>a) Phase of the AC source:<br>
I tired SinusoidalVoltageSource() but I failed to specify a phase offset. Altough it’s base class SinusoidalMixin() offers a delay attribute, it seems that it just enables the source after a given time and thus this isn’t the desired behaviour for my purpose. Alternatively, I defined my own grid voltage using a NgSpiceShared object according …/examples/ngspice-shared/external-source.html.<br>
This essential does the trick for me but leaves with the next problem.</p>
<p>b) Multiple External Sources:<br>
Give the simulation flow above I need to run the simulation with at least four external sources, two for every half bridge, and five if I define the grid voltage also as external source. So I wonder how I define multiple shared objects.</p>
<p>c) Setting the initial conditions<br>
Since I run the simulation in chunks I wonder if I have to preload the nodes with the latest values and I need to run the simulation with start_time=0 and end_time=timespan according the controller’s sample rate or are the states kept internally and I need just to run the simulation with start_time=(k-1)<em>timespan, end_time=k</em>timespan in order to run the kth simulation chunk.</p>
<p>Any help is kindly appreciated!</p> ]]></description>
        <link>https://pyspice.discourse.group/t/interrupted-simulation-multiple-sources/144#post_1</link>
        <pubDate>Wed, 11 Aug 2021 15:05:52 +0000</pubDate>
        <guid isPermaLink="false">pyspice.discourse.group-post-237</guid>
      </item>
      <item>
        <title>Library import corner analysis</title>
        <dc:creator><![CDATA[@junsang Jun]]></dc:creator>
        <description><![CDATA[ <p>Hello!</p>
<p>I am not familiar with English so if there is something not clear, please ask me!!</p>
<p>I am trying to import library file using corner analysis<br>
The code below is what I wish to use in NgSpice text</p>
<pre><code class="lang-auto">.lib 'mm018.l' TT
</code></pre>
<p>Since there is “TT” added for typical type analysis,<br>
I can’t use the library import using the code below in pyspice</p>
<pre><code class="lang-auto">spice_library = SpiceLibrary('./library_to_add')
</code></pre>
<p>I have no idea how I should solve this problem, please help me</p> ]]></description>
        <link>https://pyspice.discourse.group/t/library-import-corner-analysis/143#post_1</link>
        <pubDate>Mon, 09 Aug 2021 06:01:08 +0000</pubDate>
        <guid isPermaLink="false">pyspice.discourse.group-post-236</guid>
      </item>
      <item>
        <title>Divide one AC-analysis waveform by another</title>
        <dc:creator><![CDATA[@thicksheik Jack Mule]]></dc:creator>
        <description><![CDATA[ <p>I have run an AC analysis in PySpice.<br>
I have found the waveform for input (source) voltage, and input (source) current.<br>
Now I would like to find the impedance waveform (voltage/current)<br>
How can I divide one waveform by another?</p>
<p>Thanks for your help!</p> ]]></description>
        <link>https://pyspice.discourse.group/t/divide-one-ac-analysis-waveform-by-another/140#post_1</link>
        <pubDate>Fri, 28 May 2021 12:53:00 +0000</pubDate>
        <guid isPermaLink="false">pyspice.discourse.group-post-233</guid>
      </item>
      <item>
        <title>Extract array of complex numbers from waveform</title>
        <dc:creator><![CDATA[@thicksheik Jack Mule]]></dc:creator>
        <description><![CDATA[ <p>Hi</p>
<p>I am just getting started with PySpice.</p>
<p>I have run an AC analysis on a netlist using PySpice, and have extracted my waveforms, but would like to convert these into a numpy array of complex numbers - how do I do this?</p>
<p>I want to do further mathematical analysis on the PySpice Waveform output.</p>
<p>Thanks</p> ]]></description>
        <link>https://pyspice.discourse.group/t/extract-array-of-complex-numbers-from-waveform/139#post_1</link>
        <pubDate>Fri, 28 May 2021 12:50:00 +0000</pubDate>
        <guid isPermaLink="false">pyspice.discourse.group-post-232</guid>
      </item>
      <item>
        <title>Extract float-type number from class &#39;PySpice.Unit.Unit.UnitValue&#39;</title>
        <dc:creator><![CDATA[@thicksheik Jack Mule]]></dc:creator>
        <description><![CDATA[ <p>Hi</p>
<p>I am just getting started with using PySpice.</p>
<p>I have extracted voltage/current values from a PySpice analysis, and would like to analyze these using other Python functions.</p>
<p>But all of my values are now of type class ‘PySpice.Unit.Unit.UnitValue’.</p>
<p>How can I remove the units, so that these are just normal float numbers?</p>
<p>Thanks</p> ]]></description>
        <link>https://pyspice.discourse.group/t/extract-float-type-number-from-class-pyspice-unit-unit-unitvalue/138#post_1</link>
        <pubDate>Fri, 28 May 2021 12:44:13 +0000</pubDate>
        <guid isPermaLink="false">pyspice.discourse.group-post-231</guid>
      </item>
      <item>
        <title>Whats PySpice&#39;s Advantages?</title>
        <dc:creator><![CDATA[@dsalman Salman]]></dc:creator>
        <description><![CDATA[ <p>Pyspice opens up the power of python for theoretical calculations, side by side with simulations. You cannot do this in any other simulator. See the videos in this playlist here which illustrate the flexibility and advantage of using Pyspice, compared to LTSPICE, PSPICE: <a href="https://www.youtube.com/watch?v=KnA7xI7MAuI&amp;list=PL6JL9fVjrZLcqixnvq9wUpG1xNGrIRH8j" class="inline-onebox" rel="noopener nofollow ugc">Introduction to PySpice (Python) for DC Circuit Analysis with Dependent Sources - YouTube</a></p> ]]></description>
        <link>https://pyspice.discourse.group/t/whats-pyspices-advantages/135#post_2</link>
        <pubDate>Sun, 23 May 2021 11:10:07 +0000</pubDate>
        <guid isPermaLink="false">pyspice.discourse.group-post-229</guid>
      </item>
  </channel>
</rss>
